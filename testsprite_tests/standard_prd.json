{
  "meta": {
    "project": "Free Public Library",
    "date": "2025-10-20",
    "prepared_by": "Generated by ChatGPT"
  },
  "product_overview": "Free Public Library is a user-centric web platform designed to provide free access to a vast collection of e-books that users can read online, download for offline use, and manage through personalized features. It incorporates robust user authentication, book discovery, diverse reading modes, and advanced UX with theme personalization and accessibility options.",
  "core_goals": [
    "Enable users to read and download e-books directly from the website.",
    "Implement secure user account management with profile, reading history, and personalization.",
    "Allow users to upload and manage their book contributions to the library.",
    "Provide powerful book discovery tools including search, filtering, recommendations, and browsing by categories.",
    "Offer an engaging reading experience with multiple modes, animations, and accessibility features like text-to-speech.",
    "Support dual light/dark theme toggling with persistent user preference.",
    "Ensure high performance with optimized load times and reliable fallback mechanisms."
  ],
  "key_features": [
    "User Authentication: Secure registration and login with profile management.",
    "Personal Library Dashboard: Automatic saving of reading progress and bookmarks with categorized shelves (Plan to Read, Reading, On Hold, Completed).",
    "Book Search and Filtering: Search by title, author, publisher, and filter by category.",
    "Book Discovery Sections: Browsing full collection, category filtering, 'For You' recommendations for series continuation, top trending books slider, and a randomizer button.",
    "Reading Interface: Supports single page, two-page, and full-screen modes with zoom controls, text magnifier, page-curl animations, and 3D CSS effects.",
    "Text-to-Speech: Accessibility feature to read books aloud.",
    "Theme Management: Light and dark theme toggle with persistence.",
    "Book Management: CRUD operations for books including user uploads and removals.",
    "Music Player: Background music playback with multiple selectable tracks.",
    "Error Handling: Fallback and graceful error pages for reliability."
  ],
  "user_flow_summary": [
    "User registers or logs in to create a secure profile.",
    "User searches for books using the search bar or browses via categories and discovery sections.",
    "User selects a book to read with options for reading modes, page navigation, zoom, and text-to-speech playback.",
    "User bookmarks pages, categorizes their reading status, and accesses their personal library dashboard to track progress.",
    "Users can upload new books or manage their contributions in the library.",
    "User toggles between light and dark themes, which persist across sessions.",
    "User listens to background music tracks while reading, controlled through the interface.",
    "If errors occur, graceful fallback pages guide the user without interrupting sessions."
  ],
  "validation_criteria": [
    "Successful user registration and login workflows with profile persistence.",
    "Accurate and performant search and filter results for books.",
    "Consistent saving of reading progress and bookmarks across sessions.",
    "Smooth operation of reading modes, including page-curl animation and zoom features.",
    "Reliable text-to-speech functionality reading correct book content.",
    "Theme toggling immediately updates UI and persists on reload.",
    "Users can upload, edit, and remove books with changes reflected correctly.",
    "Background music plays correctly with track selection and does not impact reading UX.",
    "No crashes or data loss; graceful fallback pages render on errors or connection failures.",
    "Page load times and search responses meet defined performance benchmarks."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Tailwind CSS",
      "React Router DOM",
      "Supabase",
      "React PDF",
      "Lucide React",
      "Sonner",
      "Radix UI",
      "Express",
      "Node.js"
    ],
    "features": [
      {
        "name": "Book Search and Filter",
        "description": "Search books by title, author, or description with category filtering",
        "files": [
          "src/pages/Index.tsx",
          "src/data/books.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Book Search API",
            "version": "1.0.0"
          },
          "paths": {
            "/search": {
              "get": {
                "summary": "Search books",
                "parameters": [
                  {
                    "name": "query",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  },
                  {
                    "name": "category",
                    "in": "query",
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "List of matching books"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "PDF Reader",
        "description": "Read PDF books with zoom controls, page navigation, and two-page mode",
        "files": [
          "src/components/PDFReader.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "PDF Reader API",
            "version": "1.0.0"
          },
          "paths": {
            "/reader/{bookId}": {
              "get": {
                "summary": "Open PDF reader for a book",
                "parameters": [
                  {
                    "name": "bookId",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "PDF reader interface"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "User Authentication",
        "description": "User login and registration with fallback local authentication",
        "files": [
          "src/pages/Login.tsx",
          "src/pages/Register.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Authentication API",
            "version": "1.0.0"
          },
          "paths": {
            "/login": {
              "post": {
                "summary": "User login",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "email": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Login successful"
                  }
                }
              }
            },
            "/register": {
              "post": {
                "summary": "User registration",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "email": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Registration successful"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Book Management",
        "description": "Manage books with CRUD operations and status tracking",
        "files": [
          "src/pages/BookDetail.tsx",
          "src/components/BookCard.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Book Management API",
            "version": "1.0.0"
          },
          "paths": {
            "/api/books": {
              "get": {
                "summary": "Get all books",
                "responses": {
                  "200": {
                    "description": "List of books"
                  }
                }
              }
            },
            "/api/books/{id}": {
              "get": {
                "summary": "Get book by ID",
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Book details"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Personal Library",
        "description": "User's personal library with bookmarks and reading progress",
        "files": [
          "src/pages/Bookmarks.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Personal Library API",
            "version": "1.0.0"
          },
          "paths": {
            "/api/user-library": {
              "get": {
                "summary": "Get user's library",
                "responses": {
                  "200": {
                    "description": "User's library"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Theme Management",
        "description": "Dark/light theme toggle with persistence",
        "files": [
          "src/contexts/ThemeContext.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Theme API",
            "version": "1.0.0"
          },
          "paths": {
            "/api/theme": {
              "post": {
                "summary": "Toggle theme",
                "responses": {
                  "200": {
                    "description": "Theme toggled successfully"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Music Player",
        "description": "Background music player with multiple tracks",
        "files": [
          "src/components/PDFReader.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Music Player API",
            "version": "1.0.0"
          },
          "paths": {
            "/music/{track}": {
              "get": {
                "summary": "Get music track",
                "parameters": [
                  {
                    "name": "track",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Music track file"
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
