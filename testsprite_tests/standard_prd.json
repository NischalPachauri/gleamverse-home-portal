{
  "meta": {
    "project": "Free Public Library Website",
    "date": "2025-10-20",
    "prepared_by": "Generated by ChatGPT"
  },
  "product_overview": "A free public library web platform that allows users to read, download, and manage e-books with personalized reading experiences, AI-enhanced covers, and community-driven content management.",
  "core_goals": [
    "Enable seamless book access for reading and downloading.",
    "Implement secure user accounts with personalized profile, history, and preferences.",
    "Provide content management to allow users to upload and remove books.",
    "Offer a rich book discovery experience with search, browsing, categories, and recommendations.",
    "Deliver an immersive reading interface with multi-mode reader, text-to-speech, and customizations.",
    "Ensure high performance with optimized load times and efficient asset handling.",
    "Support dual-theme (light/dark) with user toggling and system preference detection.",
    "Implement robust fallback and error handling for reliable user sessions."
  ],
  "key_features": [
    "Book Catalog with 347 books featuring AI-generated covers, search, and category filtering.",
    "User Authentication with registration, login, and profile management via Supabase.",
    "Bookmarks Management allowing users to categorize books into plan to read, reading, on hold, and completed.",
    "Reading History tracking with automatic logging of reading progress.",
    "In-app PDF Reader supporting single/two-page modes, full-screen, and page-curl animations.",
    "Dual Theme Management with light/dark mode toggling and system preference detection.",
    "Text-to-Speech feature for audiobook-style reading accessibility.",
    "Randomize button offering selected random book suggestions to users.",
    "For You recommendations showing related book series to enhance discovery.",
    "Top Recommendations slider showcasing trending books with author info in a looping UI.",
    "Admin Panel for managing books and system settings by administrators.",
    "Personal Library dashboard saving current reading books and last read page automatically."
  ],
  "user_flow_summary": [
    "User registers/logs in via authentication system and manages their profile.",
    "User browses the book catalog using search, filters, category browsing, and recommendations.",
    "User views detailed book pages with AI-generated covers and opens books in PDF reader with multi-mode options.",
    "User bookmarks books with statuses and tracks reading history automatically.",
    "User listens via text-to-speech or customizes reading via themes, font size, view modes, and full-screen toggling.",
    "Admin accesses the admin panel to manage library content and system configurations."
  ],
  "validation_criteria": [
    "Books display correctly with AI-generated covers and filters function as expected.",
    "User authentication processes secure login, registration, and profile management flawlessly.",
    "Bookmark statuses update correctly and persist across sessions.",
    "Reading history accurately records user progress and is retrievable.",
    "PDF reader displays books with functional page navigation, modes, and full-screen capability.",
    "Theme toggling switches UI for light and dark modes smoothly with system preference.",
    "Text-to-speech reads book content clearly and user can control playback.",
    "Randomize button suggests diverse books each use.",
    "Recommendation algorithms show relevant and updated books in 'For You' and 'Top Recommendations'.",
    "Admin panel grants proper access and functionality to manage content and system settings.",
    "System recovers gracefully from errors providing fallback UI and stable user sessions."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Tailwind CSS",
      "Supabase",
      "React Router",
      "TanStack Query",
      "Shadcn/ui",
      "Lucide React"
    ],
    "features": [
      {
        "name": "Book Catalog",
        "description": "Display and manage a collection of 347 books with AI-generated covers, search functionality, and category filtering",
        "files": [
          "src/pages/Index.tsx",
          "src/components/BookCard.tsx",
          "src/data/books.ts",
          "src/data/all-books.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Book Catalog API",
            "version": "1.0.0",
            "description": "API for managing book catalog with AI-generated covers"
          },
          "paths": {
            "/": {
              "get": {
                "summary": "Get book catalog page",
                "responses": {
                  "200": {
                    "description": "Book catalog page with search and filtering"
                  }
                }
              }
            },
            "/book/{id}": {
              "get": {
                "summary": "Get book details",
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Book detail page with PDF reader"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "AI Book Cover Generation",
        "description": "Generate AI-inspired book covers with detailed scenes based on book titles and genres",
        "files": [
          "scripts/generateAICovers.js",
          "public/book-covers/",
          "src/components/BookCard.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "AI Book Cover Generation",
            "version": "1.0.0",
            "description": "Generate AI-inspired book covers with detailed scenes"
          },
          "paths": {
            "/book-covers/{filename}": {
              "get": {
                "summary": "Get AI-generated book cover",
                "parameters": [
                  {
                    "name": "filename",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "SVG book cover image",
                    "content": {
                      "image/svg+xml": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "User Authentication",
        "description": "User authentication system with Supabase integration for login, registration, and profile management",
        "files": [
          "src/contexts/AuthContext.tsx",
          "src/components/auth/AuthModal.tsx",
          "src/pages/Profile.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Authentication API",
            "version": "1.0.0",
            "description": "User authentication and profile management"
          },
          "paths": {
            "/profile": {
              "get": {
                "summary": "Get user profile",
                "responses": {
                  "200": {
                    "description": "User profile page"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Bookmarks Management",
        "description": "Save and manage book bookmarks with different statuses (plan, reading, on_hold, completed)",
        "files": [
          "src/pages/Bookmarks.tsx",
          "src/hooks/useBookmarks.ts",
          "supabase/migrations/20251020070000_profiles_and_books.sql"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Bookmarks API",
            "version": "1.0.0",
            "description": "Manage user bookmarks and reading status"
          },
          "paths": {
            "/bookmarks": {
              "get": {
                "summary": "Get user bookmarks",
                "responses": {
                  "200": {
                    "description": "User bookmarks page"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Reading History",
        "description": "Track reading progress and history for users",
        "files": [
          "src/pages/ReadingHistory.tsx",
          "src/hooks/useReadingHistory.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Reading History API",
            "version": "1.0.0",
            "description": "Track and manage reading history"
          },
          "paths": {
            "/reading-history": {
              "get": {
                "summary": "Get reading history",
                "responses": {
                  "200": {
                    "description": "Reading history page"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "PDF Reader",
        "description": "In-app PDF reader for viewing books with page navigation and progress tracking",
        "files": [
          "src/components/PDFReader.tsx",
          "src/pages/BookDetail.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "PDF Reader API",
            "version": "1.0.0",
            "description": "PDF reading functionality"
          },
          "paths": {
            "/book/{id}": {
              "get": {
                "summary": "Open PDF reader for book",
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "PDF reader page"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Theme Management",
        "description": "Dark/light theme switching with system preference detection",
        "files": [
          "src/contexts/ThemeContext.tsx",
          "src/components/Header.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Theme API",
            "version": "1.0.0",
            "description": "Theme management and switching"
          }
        }
      },
      {
        "name": "Admin Panel",
        "description": "Administrative interface for managing books and system settings",
        "files": [
          "src/pages/Admin.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Admin API",
            "version": "1.0.0",
            "description": "Administrative functions"
          },
          "paths": {
            "/admin": {
              "get": {
                "summary": "Get admin panel",
                "responses": {
                  "200": {
                    "description": "Admin panel page"
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
