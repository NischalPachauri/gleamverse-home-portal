{
  "meta": {
    "project": "Free Public Library",
    "date": "2025-10-20",
    "prepared_by": "Generated by AI"
  },
  "product_overview": "The Free Public Library is a user-centric website providing free access to a vast collection of e-books. Users can read, download, and manage books with personalized features including user profiles, bookmarks, reading statuses, and theme customization.",
  "core_goals": [
    "Enable users to read and download books seamlessly on the platform.",
    "Implement secure user authentication and personalized profiles with reading history tracking.",
    "Allow users to contribute by uploading and managing books in the library.",
    "Provide intuitive book discovery with search, category filtering, and personalized recommendations.",
    "Enhance reading experience with multi-mode PDF reader, text-to-speech, and advanced UI effects.",
    "Optimize website performance for fast loading and reliable operation with graceful error handling."
  ],
  "key_features": [
    "User registration, login, and profile management supporting reading history and preferences.",
    "Book search by title, author, and description with category filters and random book suggestions.",
    "Personal Library with bookmarking and shelving system to track reading status (Planning to Read, Reading, On Hold, Completed).",
    "Dynamic top books carousel showing trending books in a looping slider with author info.",
    "PDF reader supporting single page, two-page mode, zoom controls, page navigation, and fullscreen reading.",
    "Dark/light theme toggle with persistence for user preference.",
    "Text-to-Speech feature for audio book experience.",
    "Advanced UI effects including page-curling animation, 3D cover effects, magnification, and hover interactions.",
    "Fallback mechanisms for handling errors like 404 pages and connection issues without crashing."
  ],
  "user_flow_summary": [
    "User registers or logs in to access personalized features, including saving reading progress and managing bookshelf.",
    "User searches for books by title, author, or category using the search bar and filters on the home or browse pages.",
    "User discovers books via category browsing, \"For You\" recommended series, top recommendations carousel, or the randomize button.",
    "User selects a book to read using the PDF reader with options for single/two-page modes, zoom, and fullscreen.",
    "User can bookmark books and categorize them by reading status like \"Reading\" or \"Completed\" through their personal library dashboard.",
    "User toggles between light and dark themes, with preferences saved persistently.",
    "The system automatically saves the user's last read page and reading activity for revisit.",
    "The website offers graceful fallback UI in cases of errors or connectivity issues to maintain session continuity."
  ],
  "validation_criteria": [
    "Users must be able to register, login, and have secure profile management.",
    "Search results must accurately filter by title, author, and category with rapid response times.",
    "Book reading interface must support single and two-page modes, zoom controls, and fullscreen functionality.",
    "Bookmarks and reading statuses must save correctly and reflect in the user's personal library dashboard.",
    "Top books carousel should display and loop smoothly, updating with trending books.",
    "Theme toggling should persist user preference across sessions.",
    "Text-to-Speech functionality must read books aloud without errors.",
    "UI animations like page curling and 3D effects should operate smoothly across supported devices.",
    "Application must provide fallback mechanisms handling errors gracefully without session disruption."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Tailwind CSS",
      "React Router DOM",
      "Supabase",
      "React PDF",
      "Lucide React",
      "Sonner",
      "Radix UI"
    ],
    "features": [
      {
        "name": "Book Search and Filter",
        "description": "Search books by title, author, or description with category filtering",
        "files": [
          "src/pages/Index.tsx",
          "src/data/books.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Book Search API",
            "version": "1.0.0"
          },
          "paths": {
            "/search": {
              "get": {
                "summary": "Search books",
                "parameters": [
                  {
                    "name": "query",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  },
                  {
                    "name": "category",
                    "in": "query",
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "List of matching books"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "PDF Reader",
        "description": "Read PDF books with zoom controls, page navigation, and two-page mode",
        "files": [
          "src/components/PDFReader.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "PDF Reader API",
            "version": "1.0.0"
          },
          "paths": {
            "/reader/{bookId}": {
              "get": {
                "summary": "Open PDF reader for a book",
                "parameters": [
                  {
                    "name": "bookId",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "PDF reader interface"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "User Authentication",
        "description": "User login and registration with fallback local authentication",
        "files": [
          "src/pages/Login.tsx",
          "src/pages/Register.tsx",
          "src/integrations/supabase/client.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Authentication API",
            "version": "1.0.0"
          },
          "paths": {
            "/login": {
              "post": {
                "summary": "User login",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "email": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Login successful"
                  }
                }
              }
            },
            "/register": {
              "post": {
                "summary": "User registration",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "email": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Registration successful"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Book Status Management",
        "description": "Manage book reading status (Planning to read, Reading, On hold, Completed)",
        "files": [
          "src/components/BookCard.tsx",
          "src/pages/Bookmarks.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Book Status API",
            "version": "1.0.0"
          },
          "paths": {
            "/book/{bookId}/status": {
              "put": {
                "summary": "Update book status",
                "parameters": [
                  {
                    "name": "bookId",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "status": {
                            "type": "string",
                            "enum": [
                              "Planning to read",
                              "Reading",
                              "On hold",
                              "Completed"
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Status updated successfully"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Top Books Carousel",
        "description": "Display rotating carousel of top books with infinite loop",
        "files": [
          "src/components/TopBooks.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Top Books API",
            "version": "1.0.0"
          },
          "paths": {
            "/top-books": {
              "get": {
                "summary": "Get top books for carousel",
                "responses": {
                  "200": {
                    "description": "List of top books"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Theme Management",
        "description": "Dark/light theme toggle with persistence",
        "files": [
          "src/contexts/ThemeContext.tsx",
          "src/pages/Index.tsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Theme API",
            "version": "1.0.0"
          },
          "paths": {
            "/theme": {
              "post": {
                "summary": "Toggle theme",
                "responses": {
                  "200": {
                    "description": "Theme toggled successfully"
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
